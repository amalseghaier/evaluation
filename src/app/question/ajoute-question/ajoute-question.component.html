<app-header></app-header>

<div class="content container-fluid">
  <div class="col-lg-12">
    <div class="card mb-0">
      <div class="card-body">
        <div class="col">
          <h3 class="page-title">Ajoute Question</h3>
          <div class="col">
            <ul class="breadcrumb justify-content-end">
              <li class="breadcrumb-item"><a routerLink="/question">Question</a></li>
              <li class="breadcrumb-item active">Ajoute Question</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="page-">
      <div class="row align-items-center">
        <div class="col"></div>
        <div class="col-auto text-end float-end ms-auto download-grp">
          <a href="#" class="btn btn-outline-primary me-2"><i class="fas fa-download"></i> Download</a>
          <a href="add-transport.html" class="btn btn-primary"><i class="fas fa-plus"></i></a>
        </div>
      </div>
    </div>
    <div class="question-container">
      <form #f="ngForm" (submit)="ajout(f)">
        <!-- Choisir un examen -->
        <div class="form-group">
          <label for="id_examen">Choisir un examen :</label>
          <select class="form-control" id="id_examen" required [(ngModel)]="question.id_examen" name="id_examen">
            <option *ngFor="let examen of examens" [ngValue]="examen.id">{{ examen.titre }} - {{ examen.type_examen }}</option>
          </select>
        </div>

        <div *ngFor="let question of questions; let i = index" class="question">
          <div class="form-group">
            <label for="titre{{i}}">Titre Question {{i+1}} :</label>
            <input type="text" class="form-control" id="titre{{i}}" required [(ngModel)]="question.titre" name="titre{{i}}">
          </div>

          <div class="form-group">
            <label for="type{{i}}">Type Question {{i+1}} :</label>
            <select class="form-control" id="type{{i}}" required [(ngModel)]="question.type" name="type{{i}}">
              <option value="choix_unique">Choix unique</option>
              <option value="choix_multiple">Choix multiple</option>
            </select>
          </div>

          <div class="form-group" *ngIf="question.type === 'choix_unique' || question.type === 'choix_multiple'">
            <label>Options :</label>
            <div *ngFor="let option of question.options; let j = index" class="input-group mb-2">
              <input type="text" class="form-control" name="options{{i}}{{j}}" [(ngModel)]="question.options[j].value">
              <div class="input-group-append">
                <button type="button" class="btn btn-danger" (click)="removeOption(i, j)">Supprimer</button>
              </div>
            </div>
            <button type="button" class="btn btn-success mt-2" (click)="addOption(i)">Ajouter Option</button>
          </div>

          <div class="form-group">
            <label for="Reponse_correcte{{i}}">RÃ©ponse Correcte {{i+1}} :</label>
            <input type="text" class="form-control" id="Reponse_correcte{{i}}" required [(ngModel)]="question.Reponse_correcte" name="Reponse_correcte{{i}}">

          </div>

          <div class="form-group">
            <label for="points{{i}}">Points {{i+1}} :</label>
            <input type="number" class="form-control" id="points{{i}}" required [(ngModel)]="question.points" name="points{{i}}">
          </div>

          <button type="button" class="btn btn-danger" (click)="removeQuestionExam(i)">Supprimer Question</button>
        </div>

        <button type="button" class="btn btn-success mt-2" (click)="addQuestion()">Ajouter Question</button><br>
        <button [disabled]="f.invalid" type="submit" class="btn btn-primary mt-2">Ajouter autres Questions</button>
      </form>
    </div>
  </div>
</div>

<app-footer></app-footer>
